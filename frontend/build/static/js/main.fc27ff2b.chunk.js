(this["webpackJsonpmeme-stream-ms"]=this["webpackJsonpmeme-stream-ms"]||[]).push([[0],{42:function(e){e.exports=JSON.parse('{"ip":"meme-stream-ms.herokuapp.com"}')},47:function(e,t,n){},48:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return L}));var a=n(0),c=n.n(a),s=n(18),i=n.n(s),r=(n(47),n(12)),o=n(13),l=n(15),d=n(14),h=n(5),j=(n(48),n(49),n(16)),u=n.n(j),b=n(24),m=n(20),p=n(21),x=n.n(p),O=n(23),f=n(1),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={name:"",caption:"",url:""},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.name&&""!==e.state.caption&&""!==e.state.url&&(e.props.onFormSubmit(e.state),e.setState({name:"",caption:"",url:""}))},e.handleInputChange=function(t){t.preventDefault(),e.setState(Object(O.a)({},t.target.name,t.target.value))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.caption,a=e.url;return Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsxs)("div",{className:"input-container",children:[Object(f.jsx)("label",{htmlFor:"name",children:"Meme Owner"}),Object(f.jsx)("input",{type:"text",className:"input-text",placeholder:"Enter your full Name",name:"name",id:"name",value:t,onChange:this.handleInputChange})]}),Object(f.jsxs)("div",{className:"input-container",children:[Object(f.jsx)("label",{htmlFor:"caption",children:"Caption"}),Object(f.jsx)("input",{type:"text",className:"input-text",placeholder:"Be creative with the caption",name:"caption",id:"caption",value:n,onChange:this.handleInputChange})]}),Object(f.jsxs)("div",{className:"input-container",children:[Object(f.jsx)("label",{htmlFor:"url",children:"Meme URL"}),Object(f.jsx)("input",{type:"text",className:"input-text",placeholder:"Enter URL of the meme here",name:"url",id:"url",value:a,onChange:this.handleInputChange})]}),Object(f.jsx)("div",{style:{margin:"25px 0px 0px"},children:Object(f.jsx)("button",{className:"primary-button",children:"Submit Meme"})})]})}}]),n}(c.a.Component),g=n(81),y=n(82),N=n(19),k=n(85),C=function(e){return Object(f.jsx)("div",{className:"Outer",style:{position:"relative",width:"100%",height:"0",paddingBottom:"".concat(1/e.ratio*100,"%")},children:Object(f.jsx)("div",{className:"Inner",style:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:e.children})})},w=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){e.preventDefault(),a.setState(Object(O.a)({},e.target.name,e.target.value))},a.state={_id:"",name:"",caption:"",url:"",mode:"view"},a.handleInputChange=a.handleInputChange.bind(Object(N.a)(a)),a.handleSave=a.handleSave.bind(Object(N.a)(a)),a.handleEdit=a.handleEdit.bind(Object(N.a)(a)),a}return Object(o.a)(n,[{key:"handleSave",value:function(e){e.preventDefault(),""!==this.state.name&&""!==this.state.caption&&""!==this.state.url&&(this.props.onUpdate(this.state),this.setState({name:this.state.name,caption:this.state.caption,url:this.state.url,mode:"view"}))}},{key:"handleEdit",value:function(){this.setState({mode:"edit"})}},{key:"renderInputField",value:function(){return"view"===this.state.mode?Object(f.jsx)("div",{}):Object(f.jsx)("p",{children:Object(f.jsxs)("form",{style:{display:"block"},onSubmit:this.handleSave,children:[Object(f.jsx)("div",{className:"input-container",children:Object(f.jsx)("input",{name:"caption",className:"input-text",onChange:this.handleInputChange,value:this.state.caption})}),Object(f.jsx)("div",{className:"input-container",children:Object(f.jsx)("input",{name:"url",className:"input-text",onChange:this.handleInputChange,value:this.state.url})})]})})}},{key:"renderButton",value:function(){return"view"===this.state.mode?Object(f.jsx)("button",{className:"tertiary-button",onClick:this.handleEdit,children:"Edit"}):Object(f.jsx)("button",{className:"tertiary-button",onClick:this.handleSave,children:"Save"})}},{key:"componentDidMount",value:function(){this.setState({_id:this.props.content._id,name:this.props.content.name,caption:this.props.content.caption,url:this.props.content.url,updatedAt:this.props.content.updatedAt})}},{key:"formatAMPM",value:function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"PM":"AM";return(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.caption,c=t.url,s=t.updatedAt,i=new Date(s);return Object(f.jsxs)("div",{className:"py-3",children:["view"===this.state.mode&&Object(f.jsxs)(k.a,{className:"text-decoration-none",text:"dark",children:[Object(f.jsxs)(k.a.Body,{children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("strong",{children:[n,"\xa0"]}),Object(f.jsx)("span",{className:"text-muted",children:this.formatAMPM(i)})]}),Object(f.jsx)(k.a.Text,{children:a})]}),Object(f.jsx)(C,{ratio:1/.75,children:Object(f.jsx)(k.a.Img,{src:c,alt:n,variant:"top",style:{objectFit:"scale-down"}})})]}),Object(f.jsx)("div",{children:this.renderInputField()}),Object(f.jsxs)("div",{style:{display:"inline-flex"},children:[Object(f.jsx)("div",{children:this.renderButton()}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"tertiary-button",onClick:function(){e.props.onDelete(e.props.id)},children:"Delete"})})]})]})}}]),n}(a.Component),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.memeobjects.map((function(t,n){return Object(f.jsx)(g.a,{xs:1,md:1,lg:1,className:"justify-content-center",children:Object(f.jsx)(w,{content:t,id:t._id,onUpdate:e.props.onUpdate,onDelete:e.props.onDelete},t._id)},n)}));return Object(f.jsx)(y.a,{className:"justify-content-center",children:t})}}]),n}(a.Component),I=function(e){var t=e.bg,n=e.textColor,a=e.className,c=e.children;return Object(f.jsx)("section",{className:"py-5 position-relative "+(e.bg?"bg-".concat(t," "):"")+(e.textColor?"text-".concat(n," "):"")+(e.className?"".concat(a," "):""),children:Object(f.jsx)("div",{children:c})})},M=function(e){return e.title||e.subtitle?Object(f.jsxs)("header",{className:e.className?"".concat(e.className):"",children:[e.title?Object(f.jsx)("h1",{className:"d-flex justify-content-center font-weight-bold",children:e.title}):"",e.subtitle?Object(f.jsx)("p",{className:"d-flex justify-content-center mb-0",children:e.subtitle}):""]}):null},D=n(83),F=(n(70),function(e){return Object(f.jsx)(I,{bg:e.bg,textColor:e.textColor,size:e.size,className:"footer",children:Object(f.jsx)(D.a,{children:Object(f.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},className:"myClass",children:[Object(f.jsx)("div",{className:"brand left",children:Object(f.jsx)("a",{href:"/",children:Object(f.jsx)("img",{src:e.logo,alt:"Memestream"})})}),Object(f.jsxs)("div",{className:"links right",children:[Object(f.jsx)("a",{href:"https://codemonk08.netlify.com/",children:"About"}),Object(f.jsx)("a",{target:"_blank",href:"https://codemonk08.netlify.app/blog/",rel:"noopener noreferrer",children:"Blog"})]}),Object(f.jsxs)("div",{className:"social right",children:[Object(f.jsx)("a",{href:"https://twitter.com/codemonk08_",target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)("span",{className:"icon",children:Object(f.jsx)("i",{className:"fa fa-twitter"})})}),Object(f.jsx)("a",{href:"https://www.linkedin.com/in/code-monk08/",target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)("span",{className:"icon",children:Object(f.jsx)("i",{className:"fa fa-linkedin"})})}),Object(f.jsx)("a",{href:"https://github.com/code-monk08",target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)("span",{className:"icon",children:Object(f.jsx)("i",{className:"fa fa-github"})})})]}),Object(f.jsx)("div",{className:"copyright left",children:e.copyright})]})})})}),_=n(84),A=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={memeobjects:[]},e.handleSubmit=function(t){x.a.post("".concat(L.endpoint,"/memes"),t).then((function(t){console.log("Recieved data ",t.data),e.setState({memeobjects:[t.data].concat(Object(m.a)(e.state.memeobjects))})}))},e.handleDelete=function(t){for(var n=Object(m.a)(e.state.memeobjects),a=-1,c=0;c<n.length;c++)if(n[c]._id===t){a=c;break}if(-1!==a){var s=n[a];console.log(s),x.a.delete("".concat(L.endpoint,"/memes/").concat(s._id)).then((function(e){console.log("In Frontend",e.data)})),n.splice(a,1),e.setState({memeobjects:n})}},e.handleUpdate=function(){var t=Object(b.a)(u.a.mark((function t(n){var a,c,s,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(m.a)(e.state.memeobjects),c=-1,s=0;case 3:if(!(s<a.length)){t.next=10;break}if(a[s]._id!==n._id){t.next=7;break}return c=s,t.abrupt("break",10);case 7:s++,t.next=3;break;case 10:if(-1!==c){t.next=12;break}return t.abrupt("return");case 12:return a[c].caption=n.caption,a[c].url=n.url,i=a[c],console.log(i),t.next=18,x.a.patch("".concat(L.endpoint,"/memes"),i).then((function(e){console.log("Updating In Frontend",e.data)}));case 18:a.splice(c,1),e.setState({memeobjects:[i].concat(Object(m.a)(a))});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.performAPICall=Object(b.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,x.a.get("".concat(L.endpoint,"/memes")).then((function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t])})).then((function(){for(var t=0;t<n.length;t++)e.setState({memeobjects:[].concat(Object(m.a)(e.state.memeobjects),[n[t]])})}));case 3:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.performAPICall();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(_.a,{className:"header",children:Object(f.jsx)("div",{className:"header-content",children:Object(f.jsx)("div",{children:Object(f.jsx)("p",{className:"header-text",children:"Meme Stream"})})})}),Object(f.jsx)(I,{bg:"white",textColor:"dark",size:"md",children:Object(f.jsxs)(D.a,{style:{position:"relative"},children:[Object(f.jsx)(M,{title:"Add Memes",subtitle:"Don't forget to be creative \ud83d\ude04"}),Object(f.jsx)(v,{onFormSubmit:this.handleSubmit})]})}),Object(f.jsx)(I,{bg:"white",textColor:"dark",size:"md",children:Object(f.jsxs)(D.a,{style:{position:"relative"},children:[Object(f.jsx)(M,{title:"Meme List",subtitle:"All user submitted memes are listed here \ud83d\ude04"}),Object(f.jsx)(S,{memeobjects:this.state.memeobjects,onDelete:this.handleDelete,onUpdate:this.handleUpdate})]})}),Object(f.jsx)(F,{bg:"white",textColor:"dark",size:"sm",description:"those who control the memes, controls the universe",copyright:"Mayank Singh \xa9 2021",logo:"https://user-images.githubusercontent.com/19390263/107851684-cc00f600-6e31-11eb-9562-9ebef58dbaaa.png"})]})}}]),n}(c.a.Component),U=Object(h.f)(A),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("div",{style:{width:"100vw"},children:Object(f.jsx)(h.c,{children:Object(f.jsx)(h.a,{path:"/",exact:!0,children:Object(f.jsx)(U,{})})})})})}}]),n}(c.a.Component),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))},P=n(22),z=n(42),L={endpoint:"https://".concat(z.ip,"/v1")};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(P.a,{children:Object(f.jsx)(B,{})})}),document.getElementById("root")),E()}},[[79,1,2]]]);
//# sourceMappingURL=main.fc27ff2b.chunk.js.map